<!DOCTYPE html>

<html>
<head>
  <!-- Standard Meta -->
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <!-- Site Properties -->
  <title>Chefnity</title>
  
  <link rel="stylesheet" type="text/css" href="css/semantic.min.css">
  <link rel="stylesheet" type="text/css" href="css/animate.css">
  <link rel="stylesheet" type="text/css" href="css/styles.css">
  <style>
    .form-style {
      font-size: 1.5em;
    }

    @media only screen and (max-width: 992px) {
      .ui.vertical.stripe {
        padding: 5em 0em;
      }
    }
    
    @media only screen and (max-width: 767px) {
      .ui.vertical.stripe {
        padding: 1em 0em;
      }
      #ofertas {
        padding-top: 50px;
      }

      .home {
      background-position-x: 50%!important;
      }
    }
  </style>
 
</head>
<body>

<!-- Following Menu -->
<div class="ui large top fixed hidden menu">
  <div class="ui container">
    <a href="#home" class="active item smooth-scrolling">Home</a>
    <a href="#ofertas" class="item smooth-scrolling">Ofertas</a>
    <a href="#nosotros" class="item smooth-scrolling">Nosotros</a>
    <a href="#contacto" class="item smooth-scrolling">Contacto</a>
    <div class="right menu">
     
      <div class="item">
        <a class="ui button smooth-scrolling" href="#contacto">Registrate</a>
      </div>
    </div>
  </div>
</div>

<!-- Sidebar Menu -->
<div class="ui vertical inverted sidebar menu">
  <a href="#home" class="item active smooth-scrolling">Home</a>
  <a href="#ofertas" class="item smooth-scrolling">Ofertas</a>
  <a href="#nosotros" class="item smooth-scrolling">Nosotros</a>
  <a href="#contacto" class="item smooth-scrolling">Contacto</a>
  <a href="#contacto" class="item smooth-scrolling">Registrate</a>
</div>


<!-- Page Contents -->
<div class="pusher">
  <div id="home" class="ui inverted vertical masthead center aligned segment home">
    <div class="overlay">
    <div class="ui container">
      <div class="ui large secondary inverted pointing menu">
        <a class="toc item">
          <i class="sidebar icon"></i>
        </a>
        <a href="#home" class="item active smooth-scrolling">Home</a>
        <a href="#ofertas" class="item smooth-scrolling">Ofertas</a>
        <a href="#nosotros" class="item smooth-scrolling">Nosotros</a>
        <a href="#contacto" class="item smooth-scrolling">Contacto</a>
        <div class="right item">
          <a class="ui inverted button">Registrate</a>
        </div>
      </div>
    </div>

    <div class="ui text container">
      <h1 class="ui inverted header">
        Hay un chef cerca tuyo
      </h1>
      <h2>¿Querés participar?</h2>
      <div class="ui huge primary button">Registrate <i class="right arrow icon"></i></div>
    </div>
    </div>
  </div>
    
  <!-- Platios del dia -->
  <div id="ofertas">
    <div class="ui container main-title">
      <h2>Ofertas del día</h2>
      <div class="ui vertical stripe segment">
        <div class="ui unstackable two column grid" id="target">
          
         </div>
      </div>
    </div>
  </div>         
   
  <!-- / ofertas principales -->
  <div id="nosotros" class="ui vertical stripe quote segment order">
    <div class="ui equal width stackable internally celled grid">
      <div class="center aligned row">
        <div class="column ">
          <h3 class="ui header">Buscá tu cocinero mas cercano</h3>
          <p>Hacé click para buscar el cocinero mas cercano.</p>
          <a class="ui orange big button" id="buscar-cocinero">Buscar</a>
        </div>
        
      </div>
      <div class="center aligned row">
        <div id="map"></div>
      </div>
    </div>
  </div>

 
  <!-- <div class="ui vertical stripe segment">
    <div class="ui middle aligned stackable grid container">
      <div class="row">
        <div class="sixteen wide column" id="mas-ofertas">
          <h2 class="ui header">Más ofertas</h2>
          
       
          <div class="ui items">
            <div class="item">
              <div class="ui small image">
                <img src="images/articulo.jpg">
              </div>
              <div class="content">
                <div class="header">Milanesa con Papa Fritas</div>
                <div class="meta">
                  <span class="price ui blue label">$1200</span>
                  <span class="stay">Delivery: retiro en domicilio del vendedor</span>
                </div>
                <div class="description">
                  <p>Un clásico en su mejor versión: cocinado por Guillermo, tu vecino de Palermo. 1,2,3 te llama el sabor.</p>
                </div>
                <div class="extra">
                  <div class="ui right floated primary button">
                   Comprar
                    <i class="right chevron icon"></i>
                  </div>
                 
                </div>
              </div>
            </div>
            <div class="item">
              <div class="ui small image">
                <img src="images/articulo.jpg">
              </div>
              <div class="content">
                <div class="header">Milanesa con Papa Fritas</div>
                <div class="meta">
                  <span class="price ui blue label">$1000</span>
                  <span class="stay">Delivery: retiro en domicilio del vendedor</span>
                </div>
                <div class="description">
                  <p>Un clásico en su mejor versión: cocinado por Guillermo, tu vecino de Palermo. 1,2,3 te llama el sabor.</p>
                </div>
                <div class="extra">
                  <div class="ui right floated primary button">
                   Comprar
                    <i class="right chevron icon"></i>
                  </div>
                 
                </div>
              </div>
            </div>
            <div class="item">
              <div class="ui small image">
                <img src="images/articulo.jpg">
              </div>
              <div class="content">
                <div class="header">Milanesa con Papa Fritas</div>
                <div class="meta">
                  <span class="price ui blue label">$1600</span>
                  <span class="stay">Delivery: retiro en domicilio del vendedor</span>
                </div>
                <div class="description">
                  <p>Un clásico en su mejor versión: cocinado por Guillermo, tu vecino de Palermo. 1,2,3 te llama el sabor.</p>
                </div>
                <div class="extra">
                  <div class="ui right floated primary button">
                   Comprar
                    <i class="right chevron icon"></i>
                  </div>
                 
                </div>
              </div>
            </div>
          </div>


        </div>
        
      </div>
     
    </div>
  </div> -->


  <div class="ui vertical stripe quote segment order">
    <div class="ui equal width stackable internally celled grid">
      <div class="center aligned row">
        <div class="column ">
          <h3 class="ui header">¿Listo para ordenar?</h3>
          <p>Hacé click en el botón para comprar online o llamanos</p>
          <button class="ui green button">(011) 3193-0989</button>
          <button class="ui green button">Comprar</button>
        </div>
        
      </div>
    </div>
  </div>

  <div class="ui container testimonials">
    <h3 class="ui header">Recomendaciones</h3>
    <div class="ui stackable four column grid ">
      <div class="column">
        <img class="ui small circular image" src="images/testimonial1.jpg">
        <i class="quote left icon"></i>
        <p>“Estoy en Buenos Aires por un intercambio. La milanesa de Guillermo es única.”</p>
        <p><strong>Jane Faber, Nueva York</strong></p>
      </div>
      <div class="column">
        <img class="ui small circular image" src="images/testimonial2.jpg">
        <i class="quote left icon"></i>
        <p>“No queda muy cerca de mi casa, pero cuando salgo del trabajo me acerco a buscarla. Vale la pena”</p>
        <p><strong>Ignacio Reyna, Recoleta</strong></p>
      </div>
      <div class="column">
        <img class="ui small circular image" src="images/testimonial3.jpg">
        <i class="quote left icon"></i>
        <p>“Llego cansada a casa y nunca tengo ganas de cocinar. Esta milanesa es mi favorita” </p>
        <p><strong>Margarita Taylor,  Palermo </strong></p>
      </div>
      <div class="column">
        <img class="ui small circular image" src="images/testimonial4.jpg">
        <i class="quote left icon"></i>
        <p>“Estaba cansada del delivery y desde que probé Chefnity no puedo dejar de comprar esta milanesa”</p>
        <p><strong>Marcela Marks, Belgrano</strong></p>
      </div>
    </div>
  </div>
 

  <div id="contacto" class="ui container testimonials ">
    <h3 class="ui header">Registrate</h3>
    <div class=" center aligned">
      <form class="ui tiny form">
        <div class="field form-style">
          <label style="padding-bottom: 10px;">Nombre</label>
          <input type="text" name="nombre" placeholder="Tu nombre" required pattern="!@#$%^&*(){}]['/.,<>:" title="Por favor ingrese su nombre">
        </div>
        <div class="field form-style">
          <label  style="padding-bottom: 10px;">E-mail</label>
          <input type="email" name="email" placeholder="Tu e-mail" required title="Por favor ingrese su email">
        </div>
        <div class="field form-style">
          <label  style="padding-bottom: 10px;">Teléfono</label>
          <input type="text" name="telefono" placeholder="Tu teléfono" required title="Por favor ingrese su telefono">
        </div>
        <div class="ui form">
        <div class="field form-style">
          <label  style="padding-bottom: 10px;">Comentario</label>
          <textarea name="comentario" required title="Por favor deje un comentario!"></textarea>
        </div>
        </div>
        <br>
        <div class="inline fields form-style">
          <label>Registrarse como</label>
          <div class="field">
            <div class="ui radio checkbox">
              <input type="radio" name="type" required="required">
              <label for="type">Chef</label>
            </div>
          </div>
          <div class="field">
            <div class="ui radio checkbox">
              <input type="radio" name="type">
              <label for="type">Comprador</label>
            </div>
          </div>
        </div>
        <br>
        <div class="ui center aligned " align="center"> 
          <button   class="ui big blue button " type="Submit">Enviar</button>
        </div>
      </form>
    </div>
  </div>




  <div class="ui inverted vertical footer segment">
    <div class="ui container">
      <div class="ui stackable inverted divided equal height stackable grid">
        <div class="three wide column">
          <h4 class="ui inverted header">Nosotros</h4>
          <div class="ui inverted link list">
            <a href="#" class="item">Sitemap</a>
            <a href="#" class="item">Contacto</a>
           
          </div>
        </div>
        <div class="three wide column">
          <h4 class="ui inverted header">Servicios</h4>
          <div class="ui inverted link list">
            <a href="#" class="item">Servicio 1</a>
            <a href="#" class="item">Servicio 2</a>
            <a href="#" class="item">Servicio 3</a>
            <a href="#" class="item">Servicio 4</a>
          </div>
        </div>
        <div class="seven wide column">
          <h4 class="ui inverted header">Chefnity 2017</h4>
          <p>Somos un grupo de emprendedores amantes de la cocina y las relaciones. Nos gusta cocinar, pero mucho más nos gusta compartir nuestras creaciones con el mundo.</p>
          <p>Podés conocer más acerca de nosotros en nuestro blog o siguiéndonos en nuestras redes sociales.</p>
        </div>
      </div>
    </div>
  </div>

</div>
<div class="ui modal" id="buy-modal">
  <i class="close icon"></i>
  <div class="header">
    Confirmar compra
  </div>
  <div class="image content"> 
    <div class="ui medium image">
      <img src="" id="compra-img">
    </div>
    <div class="description">
      <div class="ui header" id="compra-titulo"></div>
        <form class="ui form" id="form-compra" method="post" action="pago.php">
          <div class="field">
            <label>Cantidad</label>
            <input name="amount" type="number" value="1">
          </div>
          <input type="hidden" name="price" id="price-input">
          <input type="hidden" name="id" id="id-input">
          <input type="hidden" name="title" id="title-input">
          <input type="hidden" name="image" id="image-input">
          <div class="actions">
            <div class="ui black deny button">
              Cancelar
            </div>
            <a href="javascript:void(0);" class="ui positive right labeled icon button comprar-submit">
              Comprar
              <i class="checkmark icon"></i>
            </a>
          </div>
        </form>
    </div>
  </div>
  <div class="modal-map">
    <div id="buymap"></div>
  </div>
  
</div>


  <script id="template" type="text/template">     
    <div class="column">
      <div class="ui items">
        <div class="item">
          <div class="image">
            <img src={{data.img}}>
          </div>
          <div class="content">
            <a class="header">
            {{data.plato}}</a>
            <div class="meta">
              <span>{{data.comentario}}</span>
            </div>
            <div class="description">
              <p></p>
            </div>
            <div class="extra">
              <a class="ui default green button comprar" href="javascript:void(0);" data-product-title="{{data.plato}}" data-product-price="{{data.precio}}" data-image="{{data.img}}" data-id="{{data.id}}" data-location="2">Comprar</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </script>
  <script src="js/jquery.js"></script>
  <script src="js/jquery.waypoints.js"></script>
  <script src="js/semantic.min.js"></script>
  <script src="dist/components/visibility.js"></script>
  <script src="dist/components/sidebar.js"></script>
  <script src="dist/components/transition.js"></script>
  <script src="dist/components/modal.js"></script>
  <script src="js/mustache.min.js"></script>

  <script>

  var buymap;

  var locations = [
    {
      name: 'Location 1',
      lat: -34.5965822628378,
      lng: -58.369031023435515
    },
    {
      name: 'Location 2',
      lat: -32.59856053079477,
      lng: -54.40653903430177
    },
    {
      name: 'Location 3',
      lat: -35.5965322628378,
      lng: -57.369034023435515
    }
  ];

  $(document).ready(function() {

      $('.comprar-submit').click(function(){
        $('#form-compra').submit();
      });
      $('.comprar').click(function(){
        var title = $(this).data('product-title');
        var price = $(this).data('product-price');
        var loc = $(this).data('location');
        var image = $(this).data('image');
        var id = $(this).data('id');
        $('#title-input').val(title);
        $('#price-input').val(price);
        $('#image-input').val(image);
        $('#id-input').val(id);

        $('#compra-titulo').html(title);
        $('#compra-img').attr('src',image);
        $('#buy-modal').modal({
          onShow: function(){
            buymap = new google.maps.Map(document.getElementById('buymap'), {
              zoom: 14,
              center: {lat: locations[loc].lat, lng: locations[loc].lng}
            });
            var marker = new google.maps.Marker({
              position: new google.maps.LatLng(locations[loc].lat, locations[loc].lng),
              map: buymap
            });
            buymap.panTo({lat: locations[loc].lat, lng: locations[loc].lng});
          },
          onVisible: function(){
            google.maps.event.trigger(buymap, "resize");
            buymap.setCenter({lat: locations[loc].lat, lng: locations[loc].lng});
          }
        }).modal('show');

      });
      $('.smooth-scrolling[href*="#"]')
        // Remove links that don't actually link to anything
        .not('[href="#"]')
        .not('[href="#0"]')
        .click(function(event) {
          // On-page links
          if (
            location.pathname.replace(/^\//, '') == this.pathname.replace(/^\//, '') 
            && 
            location.hostname == this.hostname
          ) {
            // Figure out element to scroll to
            var target = $(this.hash);
            target = target.length ? target : $('[name=' + this.hash.slice(1) + ']');
            // Does a scroll target exist?
            if (target.length) {
              // Only prevent default if animation is actually gonna happen
              event.preventDefault();
              $('html, body').animate({
                scrollTop: target.offset().top
              }, 1000, function() {
                // Callback after animation
                // Must change focus!
                var $target = $(target);
                $target.focus();
                if ($target.is(":focus")) { // Checking if the target was focused
                  return false;
                } else {
                  $target.attr('tabindex','-1'); // Adding tabindex for elements not focusable
                  $target.focus(); // Set focus again
                };
              });
            }
          }
        });


      // fix menu when passed
      $('.masthead').visibility({
          once: false,
          onBottomPassed: function() {
            $('.fixed.menu').transition('fade in');
          },
          onBottomPassedReverse: function() {
            $('.fixed.menu').transition('fade out');
          }
        });   

      // create sidebar and attach to menu open
      $('.ui.sidebar').sidebar('attach events', '.toc.item');
    });

    $.getJSON('./platosdeldia.json', {}, function(data) {
      var template = $('#template').html();
    
      $.each(data.platosdeldia, function(k, v) {
          var rendered = Mustache.render(template, {data: v});
          $('#target').append(rendered);
      });

    });

  
  </script>
  <script>
  function rad(x) {return x*Math.PI/180;}

  // Creamos un mapa con las coordenadas actuales
  
  function initMap() {
    var infowindow = new google.maps.InfoWindow();
    
    var mapOptions = {
      zoom: 8,
      center: {lat: -34.5965822628378, lng: -58.369031023435515}
    }

    var map = new google.maps.Map(document.getElementById('map'), mapOptions);
    
    var marker, i;
    map.markers = []; 


    for (i = 0; i < locations.length; i++) {  
      marker = new google.maps.Marker({
        position: new google.maps.LatLng(locations[i].lat, locations[i].lng),
        map: map

    }); 
    map.markers.push(marker);
    google.maps.event.addDomListener(document.getElementById("buscar-cocinero"), 'click', function( event ) {
      navigator.geolocation.getCurrentPosition(function(pos) {

         var lat = pos.coords.latitude;
         var lng = pos.coords.longitude;
      
        
        var R = 6371;
        var distances = [];
        var closest = -1;
        for( i=0;i<map.markers.length; i++ ) {
            var mlat = map.markers[i].position.lat();
            var mlng = map.markers[i].position.lng();
            map.markers[i].title = locations[i].name;
            var dLat  = rad(mlat - lat);
            var dLong = rad(mlng - lng);
            var a = Math.sin(dLat/2) * Math.sin(dLat/2) +
                Math.cos(rad(lat)) * Math.cos(rad(lat)) * Math.sin(dLong/2) * Math.sin(dLong/2);
            var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
            var d = R * c;
            distances[i] = d;
            if ( closest == -1 || d < distances[closest] ) {
                closest = i;
            }
            
        }
        infowindow.setContent(map.markers[closest].title);
        infowindow.open(map, map.markers[closest]);
        var center = new google.maps.LatLng(lat, lng);
        map.panTo(center);
      });    

    });

    google.maps.event.addListener(marker, 'click', (function(marker, i) {
        return function() {
          infowindow.setContent(locations[i].name);
          infowindow.open(map, marker);
        }
      })(marker, i));
    }
  }



  </script>
  <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAWuA4fr6b0amjoCHPnO8DkHPkwAqi_xUs&callback=initMap">
  </script>

</body>

</html>
